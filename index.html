<!DOCTYPE html>
<html>
<head>
    <title>H·ªá Th·ªëng Tra C·ª©u T·ªïng H·ª£p</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/PapaParse/5.3.2/papaparse.min.js"></script>
    <style>
        body { font-family: 'Segoe UI', Arial, sans-serif; text-align: center; padding: 30px; background: #f0f2f5; }
        .box { background: white; padding: 25px; border-radius: 15px; box-shadow: 0 5px 20px rgba(0,0,0,0.1); display: inline-block; width: 90%; max-width: 500px; }
        h2 { color: #1a73e8; margin-top: 0; }
        input { padding: 15px; width: 80%; border: 2px solid #ddd; border-radius: 10px; font-size: 16px; margin-bottom: 15px; outline: none; }
        input:focus { border-color: #1a73e8; }
        button { padding: 15px 30px; background: #1a73e8; color: white; border: none; border-radius: 10px; cursor: pointer; font-weight: bold; width: 88%; }
        #status { font-size: 12px; color: #777; margin: 10px 0; }
        .result-card { text-align: left; margin-top: 20px; padding: 15px; border-radius: 10px; background: #fff; border-left: 5px solid #1a73e8; box-shadow: 0 2px 5px rgba(0,0,0,0.05); }
        .label { font-weight: bold; color: #555; display: block; margin-top: 5px; }
        .value { color: #000; margin-bottom: 10px; display: block; word-break: break-all; }
        .no-result { color: #d93025; background: #fce8e6; padding: 15px; border-radius: 10px; margin-top: 20px; }
    </style>
</head>
<body>

    <div class="box">
        <h2>üîç Tra C·ª©u D·ªØ Li·ªáu</h2>
        <input type="text" id="userInput" placeholder="Nh·∫≠p b·∫•t k·ª≥ th√¥ng tin n√†o...">
        <button onclick="checkInfo()">T√åM KI·∫æM</button>
        <div id="status">ƒêang n·∫°p d·ªØ li·ªáu t·ª´ Google Sheets...</div>
        <div id="result"></div>
    </div>

    <script>
        // D√ÅN LINK CSV C·ª¶A B·∫†N V√ÄO ƒê√ÇY
        const sheetUrl = "https://docs.google.com/spreadsheets/d/e/2PACX-1vSGyjVju8kRaAfKTo0lYPBh5frSvP46DIR9Hq3ekhvuqP1gfd_iODMlhYxTMbN-pjDOpjiSPEfcx8ft/pub?gid=0&single=true&output=csv";

        let fullData = [];

        function loadData() {
            Papa.parse(sheetUrl, {
                download: true,
                header: true,
                complete: function(results) {
                    fullData = results.data;
                    document.getElementById("status").innerHTML = "‚úÖ D·ªØ li·ªáu ƒë√£ s·∫µn s√†ng ƒë·ªÉ tra c·ª©u";
                },
                error: function() {
                    document.getElementById("status").innerHTML = "‚ùå L·ªói: Kh√¥ng th·ªÉ t·∫£i d·ªØ li·ªáu!";
                }
            });
        }

        function checkInfo() {
            const input = document.getElementById("userInput").value.trim().toLowerCase();
            const resultDiv = document.getElementById("result");
            resultDiv.innerHTML = ""; // X√≥a k·∫øt qu·∫£ c≈©
            
            if (!input) {
                alert("Vui l√≤ng nh·∫≠p th√¥ng tin c·∫ßn t√¨m!");
                return;
            }

            // T√¨m ki·∫øm trong to√†n b·ªô c√°c c·ªôt
            const matches = fullData.filter(row => {
                return Object.values(row).some(value => 
                    String(value).toLowerCase().includes(input)
                );
            });

            if (matches.length > 0) {
                matches.forEach(item => {
                    let card = document.createElement("div");
                    card.className = "result-card";
                    let content = "";
                    for (let key in item) {
                        if(item[key]) {
                            content += `<span class="label">${key}:</span><span class="value">${item[key]}</span>`;
                        }
                    }
                    card.innerHTML = content;
                    resultDiv.appendChild(card);
                });
            } else {
                resultDiv.innerHTML = "<div class='no-result'>‚ùå Kh√¥ng t√¨m th·∫•y th√¥ng tin tr√πng kh·ªõp!</div>";
            }
        }

        window.onload = loadData;
    </script>
</body>
</html>
